<!DOCTYPE HTML>
<HTML>
	<head>
		<meta charset="UTF-8">
		<title>ProposalsList</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
		<script src="cordova.js"></script>
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
		<script type="text/javascript">
			var data;
			var idNum;
			function parse(json){
				data = json;	
			}
		</script>
		<script type='text/javascript' 
		src='https://spreadsheets.google.com/feeds/list/0AqaqaVDQTj4HdGRoLVBXdFRLN0RuR2lmMFlMY1JkOEE/od6/public/values?alt=json-in-script&callback=parse'></script>
	 <script src="jquery.nicescroll.js"></script>
	 </head> 
	 <body>
		<!-- Home -->
		<div data-role="page" id="proposalPage">
			<div data-role="header">
				<a href="index.html" data-icon="arrow-l" rel="external">Back</a>
				<h4>提案清單</h4>
				<a href="index.html" data-icon="home">Home</a>
			</div>
			<div data-role="content">
				<ul id="proposalList" data-role="listview" data-filter="true">
				</ul>

			</div>
		</div>
				<script type="text/javascript">
					for(var i=1; i<data.feed.entry.length; i=i+1){
						$("#proposalList").append("<li><a href='proposalInfo.html' id='id"+i+"' rel='external' style='white-space: normal;'>"+data.feed.entry[i].gsx$title.$t+"("+data.feed.entry[i].gsx$proposer.$t+"提案)</a></li>");
						$("#id"+i).click(function(){
							idNum = parseInt($(this).attr("id").slice(2));
							window.localStorage["proposalId"]=data.feed.entry[idNum].gsx$id.$t;
						});
					}
				</script>
	</body>
</HTML> 