<!DOCTYPE HTML>
<HTML>
	<head>
		<meta charset="UTF-8">
		<title>LegislatorsList</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- cordova -->
		<script src="cordova.js"></script>
		<!-- jquery -->
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<!-- jquery mobile -->
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
		<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
		<!-- 立法委員資料 -->
 		<script type="text/javascript">
			var lgsData = JSON.parse(window.localStorage["lgsData"]);
			var nameListHtml = "";
			var partyName = new Array();
			var partyMember = new Array();
/* 			function loadLgsData(json){
				lgsData = json;	
			} */
		</script>
<!--  		<script type='text/javascript' 
		src='https://spreadsheets.google.com/feeds/list/0AqaqaVDQTj4HdDY5d0Z6SjVRUTEyX1hDdGNtMEFYTEE/od6/public/values?alt=json-in-script&callback=loadLgsData'></script>
 -->	 </head> 
	 <body>
		<!-- legislatorPage -->
		<div data-role="page" id="legislatorPage">
			<div data-role="header">
				<a href="index.html" data-icon="arrow-l" rel="external">Back</a>
				<h4>立法委員名單</h4>
				<a href="index.html" data-icon="home">Home</a>
			</div>
			<div data-role="content">
   				<div data-tab="name">
       				<ul id="nameList" data-role="listview" data-filter="true" data-filter-placeholder="請輸入委員姓名,黨籍,選區縣市或委員會">
					</ul>
   				</div>
			</div>
		</div>
 		<script type="text/javascript">
		//alert(window.localStorage["nameList"]);
		//if(!window.localStorage["nameList"]){
			//alert("page first visted");
			for(var i=3; i<lgsData.feed.entry.length; i=i+1){
				nameListHtml += "<li data-filtertext='"
								+lgsData.feed.entry[i].gsx$party.$t+" "
								+lgsData.feed.entry[i].gsx$cir.$t+" "
								+lgsData.feed.entry[i].gsx$comm.$t+" "
								+lgsData.feed.entry[i].gsx$name.$t
								+"'><a href='profile.html' id='"
								+lgsData.feed.entry[i].gsx$name.$t
								+"' rel='external' class='lgsLink'>"
								+lgsData.feed.entry[i].gsx$name.$t
								+"</a></li>";
			}
			//window.localStorage["nameList"] = nameListHtml;
		//}
		$("#nameList").append(nameListHtml);
		$(".lgsLink").click(function(){
			window.localStorage["name"] = $(this).attr("id");
		});

 		//alert(window.localStorage["nameList"]);
		</script>
		<!-- end of legislatorPage -->
		
	</body>
</HTML> 
		 